{% extends "base.html" %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è ‚Äî WOOM FIT{% endblock %}
{% block content %}
{% load static %}

<style>
@font-face{
  font-family: "Tilda Sans VF";
  src:
    url("/static/fonts/tilda/TildaSans-VF.woff2") format("woff2"),
    url("/static/fonts/tilda/TildaSans-VF.woff") format("woff");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face{
  font-family: "TildaSans-Bold";
  src:
    url("/static/fonts/tilda/TildaSans-Bold.woff2") format("woff2"),
    url("/static/fonts/tilda/TildaSans-Bold.woff") format("woff");
  font-weight: 700 900;
  font-style: normal;
  font-display: swap;
}

 :root{
  --font-head: "TildaSans-Bold", "Tilda Sans VF", sans-serif;
  --font-body: "Tilda Sans VF", sans-serif;
}

body{
  font-family: var(--font-body);
  font-weight: 450;
}


  /* –ú–æ–∏ –∑–∞–Ω—è—Ç–∏—è: –µ—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π > 2 ‚Äî –ª–∏—Å—Ç–∞–µ–º –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
  .my-bookings-scroll{
    max-height: 182px;   /* –ø—Ä–∏–º–µ—Ä–Ω–æ 2 —Å—Ç—Ä–æ–∫–∏ */
    overflow-y: auto;
  }
  .my-bookings-scroll::-webkit-scrollbar{ width: 6px; }
  .my-bookings-scroll::-webkit-scrollbar-thumb{ border-radius: 999px; }

  .my-booking-row{
    display:flex;
    align-items:center;
    gap:10px;
  }
  .my-booking-link{
    flex:1;
    min-width:0;
    text-decoration:none;
    color:inherit;
  }
  .my-booking-cancel{
    white-space:nowrap;
    padding:10px 12px;
  }
  /* ===== –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ –≥–ª–∞–≤–Ω–æ–π ===== */

/* –ó–∞–≥–æ–ª–æ–≤–∫–∏ */
.section-title,
.hero__name,
.item__title {
  font-family: var(--font-main);
  font-weight: var(--fw-black);
  letter-spacing: 0.01em;
}

/* –ö—Ä—É–ø–Ω–æ–µ –∏–º—è */
.hero__name{
  font-size: 20px;
}

/* –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç */
.hero__club,
.item__subtitle,
.muted,
.news-card__label {
  font-family: var(--font-main);
  font-weight: var(--fw-regular);
}

/* –ö–Ω–æ–ø–∫–∏ */
.btn{
  font-family: var(--font-main);
  font-weight: var(--fw-bold);
}
/* ===== –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ ===== */

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—É–Ω–∫—Ç–∞ */
.item__title{
  font-size: 16.5px;      /* –±—ã–ª–æ ~14‚Äì15 */
  
  font-weight: 800;
}

/* –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ */
.item__subtitle{
  font-size: 14px;        /* –±—ã–ª–æ ~12‚Äì13 */
  
  margin-top: 2px;
}

/* –í—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ ‚Äî –±–æ–ª—å—à–µ –≤–æ–∑–¥—É—Ö–∞ */
.item{
  padding: 14px 16px;     /* –±—ã–ª–æ –º–µ–Ω—å—à–µ */
}

/* –ò–∫–æ–Ω–∫–∞ ‚Äî —á—É—Ç—å –∫—Ä—É–ø–Ω–µ–µ */
.item__icon{
  width: 40px;            /* –±—ã–ª–æ 36 */
  height: 40px;
  border-radius: 12px;
}

.item__icon img,
.item__icon svg{
  width: 22px;
  height: 22px;
}

/* –°—Ç—Ä–µ–ª–∫–∞ —Å–ø—Ä–∞–≤–∞ */
.item__chev{
  font-size: 20px;

}
/* –ó–∞–≥–æ–ª–æ–≤–∫–∏ */
.section-title,
.hero__name,
.item__title {
  font-family: var(--font-head);
  font-weight: 800;
  letter-spacing: 0.01em;
}

/* –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç */
.hero__club,
.item__subtitle,
.muted,
.news-card__label {
  font-family: var(--font-body);
  font-weight: 450;
}

/* –ö–Ω–æ–ø–∫–∏ (–º–æ–∂–Ω–æ VF, –Ω–æ –∂–∏—Ä–Ω—ã–µ –æ–±—ã—á–Ω–æ –ø—Ä–∏—è—Ç–Ω–µ–µ) */
.btn{
  font-family: var(--font-head);
  font-weight: 800;
}


/* ===== hero stats (–∫–æ—à–µ–ª–µ–∫/–ª–æ—è–ª—å–Ω–æ—Å—Ç—å) ===== */
.hero__stats{
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.hero__pill{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,0.55);
  border: 1px solid rgba(255,45,125,0.18);
  color: rgba(17,24,39,0.9);
  font-size: 12.5px;
  font-weight: 650;
  line-height: 1;
  white-space: nowrap;
}

.hero__pill b{font-weight: 900;}
.hero__pill .mut{opacity: 0.7; font-weight: 650;}

.hero__pill--pink{
  background: rgba(255,255,255,0.55);
  border: 1px solid rgba(255,45,125,0.18);
}

</style>

<section class="hero">
  <div class="hero__avatar">üë§</div>
  <div>
    <div class="hero__name">
      {% if request.user.is_authenticated %}
        {{ request.user.get_full_name|default:"–ö–ª–∏–µ–Ω—Ç" }}
      {% else %}
        –ì–æ—Å—Ç—å
      {% endif %}
    </div>
    <div class="hero__club">WOOM FIT</div>
        {% if request.user.is_authenticated %}
      <div class="hero__stats">
        <span class="hero__pill hero__pill--pink">
          üí≥ <span class="mut">–ö–æ—à–µ–ª—ë–∫:</span>
          <b>{{ request.user.wallet.balance }}</b> ‚ÇΩ
        </span>

        

        <span class="hero__pill">
          üéÅ <span class="mut">–°–∫–∏–¥–∫–∞:</span>
          <b>{{ request.user.loyalty.discount_percent }}%</b>
          <span class="mut">({{ request.user.loyalty.tier }})</span>
        </span>
      </div>
    {% endif %}

  </div>
</section>

<h2 class="section-title">–ú–æ–∏ –∑–∞–Ω—è—Ç–∏—è</h2>
<div class="card">
  {% if my_bookings %}
    <div class="list my-bookings-scroll">
      {% for b in my_bookings %}
        <div class="item my-booking-row">
          <a class="my-booking-link"
             href="{% url 'schedule:list' %}?day={{ b.session.start_at|date:'Y-m-d' }}&loc={{ b.session.location|urlencode }}#session-{{ b.session.id }}">
            <div class="item__left">
              <div class="item__icon">üßò</div>
              <div>
                <div class="item__title">{{ b.session.title }}</div>
                <div class="item__subtitle">{{ b.session.start_at|date:"d.m H:i" }} ‚Ä¢ {{ b.session.duration_min }} –º–∏–Ω ‚Ä¢ {{ b.session.location }}</div>
              </div>
            </div>
          </a>

          <a class="btn btn--ghost my-booking-cancel"
             href="{% url 'schedule:unbook' b.session.id %}">
            –û—Ç–º–µ–Ω–∏—Ç—å
          </a>
        </div>
      {% endfor %}
    </div>

    <div style="margin-top:12px;">
      <a class="btn btn--primary btn--full" href="{% url 'schedule:list' %}">–ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a>
    </div>
  {% else %}
    <div class="muted" style="text-align:center; font-weight:900; padding:8px 0;">–ó–∞–Ω—è—Ç–∏–π –Ω–µ—Ç</div>
    <div class="muted" style="text-align:center; padding-bottom:8px; font-weight:800;">–í—ã –Ω–µ –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</div>
    <a class="btn btn--primary btn--full" href="{% url 'schedule:list' %}">–ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a>
  {% endif %}
</div>

<h2 class="section-title">WOOM FIT</h2>
<div class="list">
  <a class="item" href="{% url 'core:about' %}">
    <div class="item__left">
      <div class="item__icon" style="background:#ffe7b5;color:#b45309;">‚òÖ</div>
      <div>
        <div class="item__title">–û –∫–ª—É–±–µ</div>
        <div class="item__subtitle">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Å, –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω—ã</div>
      </div>
    </div>
    <div class="item__chev">‚Ä∫</div>
  </a>

  <a class="item" href="{% url 'core:trainers' %}">
    <div class="item__left">
      <div class="item__icon" style="background:#e0e7ff;color:#4338ca;">üéØ</div>
      <div>
        <div class="item__title">–¢—Ä–µ–Ω–µ—Ä—ã</div>
        <div class="item__subtitle">–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç—Ä–µ–Ω–µ—Ä–æ–≤ –Ω–∞—à–µ–≥–æ –∫–ª—É–±–∞</div>
      </div>
    </div>
    <div class="item__chev">‚Ä∫</div>
  </a>

  <a class="item" href="{% url 'core:rent' %}">
    <div class="item__left">
      <div class="item__icon" >
        <img src="{% static 'img/2.png' %}" alt="" style="width:22px;height:22px;display:block;">
      </div>



      <div>
        <div class="item__title">–ê—Ä–µ–Ω–¥–∞ –∑–∞–ª–∞</div>
        <div class="item__subtitle">–í—ã –º–æ–∂–µ—Ç–µ –≤–∑—è—Ç—å –≤ –∞—Ä–µ–Ω–¥—É –∑–∞–ª –≤ –Ω–∞—à–µ–º –∫–ª—É–±–µ</div>
      </div>
    </div>
    <div class="item__chev">‚Ä∫</div>
  </a>

  
</div>

{% endblock %}
